# linux 的多任务设计

- 进程
    多任务操作系统的核心概念之一， linux 的多任务是靠着进程实现的。
    对于进程的运行来说，内存就是进程生存和耕耘的空间，但是不同进程启动运行的时机不同，直接以物理地址来访问内存是非常不安全的，因为这样所有进程都运行在了同样的地址空间下，无法实现隔离，进程之间的内存占用交错，想想就很混乱。
    - 保护模式
        boot 为加载内核进行准备，然后进入保护模式运行起内核的第一个进程，该进程再进一步fork，开启其他内核进程，最后就可以运行起用户进程。
        在保护模式下，采用进程使用虚拟地址访问内存，32位系统下每个进程有 4GB 的内存空间。linux 下低地址的 3GB 是用户空间。3GB ~ 4GB 的 1GB 地址空间是内核空间。
        - 内核空间的存在意义
            保护模式下所有的进程都是运行在虚拟内存空间中的，包括内核进程，但是用户进程执行系统调用需要内核处理，所以所有进程都必须有一份相同的内核空间，这 1GB 的内核空间在所有进程中映射的物理地址都是相同的。
